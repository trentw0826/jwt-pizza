{
  "version": "00010101.010101",
  "endpoints": [
    {
      "method": "POST",
      "path": "/api/auth",
      "description": "Register a new user",
      "example": "curl -X POST localhost:3000/api/auth -d '{\"name\":\"pizza diner\", \"email\":\"d@jwt.com\", \"password\":\"diner\"}' -H 'Content-Type: application/json'",
      "response": {
        "user": {
          "id": 2,
          "name": "pizza diner",
          "email": "d@jwt.com",
          "roles": [{ "role": "diner" }]
        },
        "token": "tttttt"
      }
    },
    {
      "method": "PUT",
      "path": "/api/auth",
      "description": "Login existing user",
      "example": "curl -X PUT localhost:3000/api/auth -d '{\"email\":\"a@jwt.com\", \"password\":\"admin\"}' -H 'Content-Type: application/json'",
      "response": {
        "user": {
          "id": 1,
          "name": "常用名字",
          "email": "a@jwt.com",
          "roles": [{ "role": "admin" }]
        },
        "token": "tttttt"
      }
    },
    {
      "method": "DELETE",
      "path": "/api/auth",
      "requiresAuth": true,
      "description": "Logout a user",
      "example": "curl -X DELETE localhost:3000/api/auth -H 'Authorization: Bearer tttttt'",
      "response": { "message": "logout successful" }
    },
    {
      "method": "GET",
      "path": "/api/user/me",
      "requiresAuth": true,
      "description": "Get authenticated user",
      "example": "curl -X GET localhost:3000/api/user/me -H 'Authorization: Bearer tttttt'",
      "response": {
        "id": 1,
        "name": "常用名字",
        "email": "a@jwt.com",
        "roles": [{ "role": "admin" }]
      }
    },
    {
      "method": "PUT",
      "path": "/api/user/:userId",
      "requiresAuth": true,
      "description": "Update user",
      "example": "curl -X PUT localhost:3000/api/user/1 -d '{\"name\":\"常用名字\", \"email\":\"a@jwt.com\", \"password\":\"admin\"}' -H 'Content-Type: application/json' -H 'Authorization: Bearer tttttt'",
      "response": {
        "user": {
          "id": 1,
          "name": "常用名字",
          "email": "a@jwt.com",
          "roles": [{ "role": "admin" }]
        },
        "token": "tttttt"
      }
    },
    {
      "method": "GET",
      "path": "/api/user?page=1&limit=10&name=_",
      "requiresAuth": true,
      "description": "Gets a list of users",
      "example": "curl -X GET localhost:3000/api/user -H 'Authorization: Bearer tttttt'",
      "response": {
        "users": [
          {
            "id": 1,
            "name": "常用名字",
            "email": "a@jwt.com",
            "roles": [{ "role": "admin" }]
          }
        ]
      }
    },
    {
      "method": "DELETE",
      "path": "/api/user/:userId",
      "requiresAuth": true,
      "description": "Delete user",
      "example": "curl -X DELETE localhost:3000/api/user/1 -H 'Authorization: Bearer tttttt'",
      "response": { "message": "User deleted" }
    },
    {
      "method": "GET",
      "path": "/api/order/menu",
      "description": "Get the pizza menu",
      "example": "curl localhost:3000/api/order/menu",
      "response": [
        {
          "id": 1,
          "title": "Veggie",
          "image": "pizza1.png",
          "price": 0.0038,
          "description": "A garden of delight"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/order/menu",
      "requiresAuth": true,
      "description": "Add an item to the menu",
      "example": "curl -X PUT localhost:3000/api/order/menu -H 'Content-Type: application/json' -d '{ \"title\":\"Student\", \"description\": \"No topping, no sauce, just carbs\", \"image\":\"pizza9.png\", \"price\": 0.0001 }' -H 'Authorization: Bearer tttttt'",
      "response": [
        {
          "id": 1,
          "title": "Student",
          "description": "No topping, no sauce, just carbs",
          "image": "pizza9.png",
          "price": 0.0001
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/order",
      "requiresAuth": true,
      "description": "Get the orders for the authenticated user",
      "example": "curl -X GET localhost:3000/api/order -H 'Authorization: Bearer tttttt'",
      "response": {
        "dinerId": 4,
        "orders": [
          {
            "id": 1,
            "franchiseId": 1,
            "storeId": 1,
            "date": "2024-06-05T05:14:40.000Z",
            "items": [
              { "id": 1, "menuId": 1, "description": "Veggie", "price": 0.05 }
            ]
          }
        ],
        "page": 1
      }
    },
    {
      "method": "POST",
      "path": "/api/order",
      "requiresAuth": true,
      "description": "Create a order for the authenticated user",
      "example": "curl -X POST localhost:3000/api/order -H 'Content-Type: application/json' -d '{\"franchiseId\": 1, \"storeId\":1, \"items\":[{ \"menuId\": 1, \"description\": \"Veggie\", \"price\": 0.05 }]}' -H 'Authorization: Bearer tttttt'",
      "response": {
        "order": {
          "franchiseId": 1,
          "storeId": 1,
          "items": [{ "menuId": 1, "description": "Veggie", "price": 0.05 }],
          "id": 1
        },
        "jwt": "1111111111"
      }
    },
    {
      "method": "GET",
      "path": "/api/franchise?page=0&limit=10&name=_",
      "description": "List all the franchises",
      "example": "curl localhost:3000/api/franchise&page=0&limit=10&name=pizzaPocket",
      "response": {
        "franchises": [
          {
            "id": 1,
            "name": "pizzaPocket",
            "admins": [
              { "id": 4, "name": "pizza franchisee", "email": "f@jwt.com" }
            ],
            "stores": [{ "id": 1, "name": "SLC", "totalRevenue": 0 }]
          }
        ],
        "more": true
      }
    },
    {
      "method": "GET",
      "path": "/api/franchise/:userId",
      "requiresAuth": true,
      "description": "List a user's franchises",
      "example": "curl localhost:3000/api/franchise/4 -H 'Authorization: Bearer tttttt'",
      "response": [
        {
          "id": 2,
          "name": "pizzaPocket",
          "admins": [
            { "id": 4, "name": "pizza franchisee", "email": "f@jwt.com" }
          ],
          "stores": [{ "id": 4, "name": "SLC", "totalRevenue": 0 }]
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/franchise",
      "requiresAuth": true,
      "description": "Create a new franchise",
      "example": "curl -X POST localhost:3000/api/franchise -H 'Content-Type: application/json' -H 'Authorization: Bearer tttttt' -d '{\"name\": \"pizzaPocket\", \"admins\": [{\"email\": \"f@jwt.com\"}]}'",
      "response": {
        "name": "pizzaPocket",
        "admins": [
          { "email": "f@jwt.com", "id": 4, "name": "pizza franchisee" }
        ],
        "id": 1
      }
    },
    {
      "method": "DELETE",
      "path": "/api/franchise/:franchiseId",
      "requiresAuth": true,
      "description": "Delete a franchise",
      "example": "curl -X DELETE localhost:3000/api/franchise/1 -H 'Authorization: Bearer tttttt'",
      "response": { "message": "franchise deleted" }
    },
    {
      "method": "POST",
      "path": "/api/franchise/:franchiseId/store",
      "requiresAuth": true,
      "description": "Create a new franchise store",
      "example": "curl -X POST localhost:3000/api/franchise/1/store -H 'Content-Type: application/json' -d '{\"franchiseId\": 1, \"name\":\"SLC\"}' -H 'Authorization: Bearer tttttt'",
      "response": { "id": 1, "name": "SLC", "totalRevenue": 0 }
    },
    {
      "method": "DELETE",
      "path": "/api/franchise/:franchiseId/store/:storeId",
      "requiresAuth": true,
      "description": "Delete a store",
      "example": "curl -X DELETE localhost:3000/api/franchise/1/store/1 -H 'Authorization: Bearer tttttt'",
      "response": { "message": "store deleted" }
    }
  ],
  "config": {
    "factory": "https://pizza-factory.cs329.click",
    "db": "127.0.0.1"
  }
}
